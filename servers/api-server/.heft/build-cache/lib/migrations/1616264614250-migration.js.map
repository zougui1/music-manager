{"version":3,"file":"1616264614250-migration.js","sourceRoot":"","sources":["../../src/migrations/1616264614250-migration.ts"],"names":[],"mappings":";;;AAEA,MAAa,sBAAsB;IAAnC;QACI,SAAI,GAAG,wBAAwB,CAAA;IA2BnC,CAAC;IAzBU,KAAK,CAAC,EAAE,CAAC,WAAwB;QACpC,MAAM,WAAW,CAAC,KAAK,CAAC,qYAAqY,CAAC,CAAC;QAC/Z,MAAM,WAAW,CAAC,KAAK,CAAC,2YAA2Y,CAAC,CAAC;QACra,MAAM,WAAW,CAAC,KAAK,CAAC,2mBAA2mB,CAAC,CAAC;QACroB,MAAM,WAAW,CAAC,KAAK,CAAC,qcAAqc,CAAC,CAAC;QAC/d,MAAM,WAAW,CAAC,KAAK,CAAC,yZAAyZ,CAAC,CAAC;QACnb,MAAM,WAAW,CAAC,KAAK,CAAC,iKAAiK,CAAC,CAAC;QAC3L,MAAM,WAAW,CAAC,KAAK,CAAC,gLAAgL,CAAC,CAAC;QAC1M,MAAM,WAAW,CAAC,KAAK,CAAC,0KAA0K,CAAC,CAAC;QACpM,MAAM,WAAW,CAAC,KAAK,CAAC,8JAA8J,CAAC,CAAC;IAC5L,CAAC;IAEM,KAAK,CAAC,IAAI,CAAC,WAAwB;QACtC,MAAM,WAAW,CAAC,KAAK,CAAC,wEAAwE,CAAC,CAAC;QAClG,MAAM,WAAW,CAAC,KAAK,CAAC,kFAAkF,CAAC,CAAC;QAC5G,MAAM,WAAW,CAAC,KAAK,CAAC,kFAAkF,CAAC,CAAC;QAC5G,MAAM,WAAW,CAAC,KAAK,CAAC,2EAA2E,CAAC,CAAC;QACrG,MAAM,WAAW,CAAC,KAAK,CAAC,6BAA6B,CAAC,CAAC;QACvD,MAAM,WAAW,CAAC,KAAK,CAAC,wDAAwD,CAAC,CAAC;QAClF,MAAM,WAAW,CAAC,KAAK,CAAC,oBAAoB,CAAC,CAAC;QAC9C,MAAM,WAAW,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAAC;QAC/C,MAAM,WAAW,CAAC,KAAK,CAAC,+BAA+B,CAAC,CAAC;QACzD,MAAM,WAAW,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAAC;IACtD,CAAC;CAEJ;AA5BD,wDA4BC","sourcesContent":["import {MigrationInterface, QueryRunner} from \"typeorm\";\n\nexport class migration1616264614250 implements MigrationInterface {\n    name = 'migration1616264614250'\n\n    public async up(queryRunner: QueryRunner): Promise<void> {\n        await queryRunner.query(\"CREATE TABLE `playlists` (`id` int NOT NULL AUTO_INCREMENT, `createdAt` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), `updatedAt` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), `deletedAt` datetime(6) NULL, `version` int NOT NULL, `name` varchar(50) NOT NULL, `order` int UNSIGNED NOT NULL, `userId` int NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB\");\n        await queryRunner.query(\"CREATE TABLE `playlists_musics` (`id` int NOT NULL AUTO_INCREMENT, `createdAt` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), `updatedAt` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), `deletedAt` datetime(6) NULL, `version` int NOT NULL, `order` int UNSIGNED NOT NULL, `playlistId` int NOT NULL, `musicId` int NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB\");\n        await queryRunner.query(\"CREATE TABLE `musics` (`id` int NOT NULL AUTO_INCREMENT, `createdAt` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), `updatedAt` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), `deletedAt` datetime(6) NULL, `version` int NOT NULL, `title` varchar(80) NOT NULL, `link` varchar(255) NOT NULL, `thumbnail` varchar(255) NOT NULL, `artists` text NOT NULL DEFAULT '', `album` varchar(100) NOT NULL, `source` text NOT NULL, `tags` text NOT NULL DEFAULT '', `duration` int NOT NULL, `approved` tinyint NOT NULL, `correctness` int NULL, `userId` int NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB\");\n        await queryRunner.query(\"CREATE TABLE `users` (`id` int NOT NULL AUTO_INCREMENT, `createdAt` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), `updatedAt` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), `deletedAt` datetime(6) NULL, `version` int NOT NULL, `name` varchar(30) NOT NULL, `email` varchar(320) NOT NULL, `password` varchar(255) NOT NULL, UNIQUE INDEX `IDX_97672ac88f789774dd47f7c8be` (`email`), PRIMARY KEY (`id`)) ENGINE=InnoDB\");\n        await queryRunner.query(\"CREATE TABLE `playing_musics` (`id` int NOT NULL AUTO_INCREMENT, `createdAt` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), `updatedAt` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), `deletedAt` datetime(6) NULL, `version` int NOT NULL, `platform` varchar(80) NOT NULL, `startedAt` datetime NOT NULL, `steps` text NOT NULL DEFAULT '', PRIMARY KEY (`id`)) ENGINE=InnoDB\");\n        await queryRunner.query(\"ALTER TABLE `playlists` ADD CONSTRAINT `FK_708a919e9aa49019000d9e9b68e` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\");\n        await queryRunner.query(\"ALTER TABLE `playlists_musics` ADD CONSTRAINT `FK_8391891c711a5cb2afffdfbcca6` FOREIGN KEY (`playlistId`) REFERENCES `playlists`(`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\");\n        await queryRunner.query(\"ALTER TABLE `playlists_musics` ADD CONSTRAINT `FK_a7e34146f7cb09d5f91acdb02e7` FOREIGN KEY (`musicId`) REFERENCES `musics`(`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\");\n        await queryRunner.query(\"ALTER TABLE `musics` ADD CONSTRAINT `FK_9fb57037efb737c2dc88d8612a0` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\");\n    }\n\n    public async down(queryRunner: QueryRunner): Promise<void> {\n        await queryRunner.query(\"ALTER TABLE `musics` DROP FOREIGN KEY `FK_9fb57037efb737c2dc88d8612a0`\");\n        await queryRunner.query(\"ALTER TABLE `playlists_musics` DROP FOREIGN KEY `FK_a7e34146f7cb09d5f91acdb02e7`\");\n        await queryRunner.query(\"ALTER TABLE `playlists_musics` DROP FOREIGN KEY `FK_8391891c711a5cb2afffdfbcca6`\");\n        await queryRunner.query(\"ALTER TABLE `playlists` DROP FOREIGN KEY `FK_708a919e9aa49019000d9e9b68e`\");\n        await queryRunner.query(\"DROP TABLE `playing_musics`\");\n        await queryRunner.query(\"DROP INDEX `IDX_97672ac88f789774dd47f7c8be` ON `users`\");\n        await queryRunner.query(\"DROP TABLE `users`\");\n        await queryRunner.query(\"DROP TABLE `musics`\");\n        await queryRunner.query(\"DROP TABLE `playlists_musics`\");\n        await queryRunner.query(\"DROP TABLE `playlists`\");\n    }\n\n}\n"]}
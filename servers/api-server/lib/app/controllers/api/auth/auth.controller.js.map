{"version":3,"file":"auth.controller.js","sourceRoot":"","sources":["../../../../../src/app/controllers/api/auth/auth.controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,qCAAmG;AACnG,uCAAgC;AAEhC,0CAA+C;AAG/C,IAAa,cAAc,GAA3B,MAAa,cAAc;IAMzB,KAAK,CAAC,KAAK,CAAC,GAAY,EAAE,MAA+B,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAuC;QACjH,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QACpD,MAAM,KAAK,GAAG,qBAAa,CAAC,IAAI,CAAC,CAAC;QAElC,OAAO,IAAI,qBAAc,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;IAC7C,CAAC;IAGD,KAAK,CAAC,YAAY,KAA4B,OAAO,IAAI,qBAAc,EAAE,CAAC,CAAC,CAAC;CAC7E,CAAA;AAZC;IADC,iBAAU;kDACJ,eAAI,oBAAJ,eAAI;4CAAC;AAGZ;IADC,WAAI,CAAC,QAAQ,CAAC;;yDACE,cAAO,oBAAP,cAAO,oDAAU,MAAM,oBAAN,MAAM;wDAA8E,OAAO,oBAAP,OAAO;2CAK5H;AAGD;IADC,cAAO,CAAC,QAAQ,CAAC;;;wDACI,OAAO,oBAAP,OAAO;kDAA+C;AAdjE,cAAc;IAD1B,UAAG,CAAC,gBAAgB,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;GACpD,cAAc,CAe1B;AAfY,wCAAc","sourcesContent":["import { Context, dependency, Post, Options, HttpResponse, HttpResponseOK, Log } from '@foal/core';\nimport { User } from 'user-pkg';\n\nimport { generateToken } from '../../../utils';\n\n@Log('AuthController', { body: true, params: true, query: true })\nexport class AuthController {\n\n  @dependency\n  user!: User;\n\n  @Post('/login')\n  async login(ctx: Context, params: Record<string, unknown>, { email, password }: { email: string, password: string }): Promise<HttpResponse> {\n    const user = await this.user.login(email, password);\n    const token = generateToken(user);\n\n    return new HttpResponseOK({ user, token });\n  }\n\n  @Options('/login')\n  async loginOptions(): Promise<HttpResponse> { return new HttpResponseOK(); }\n}\n"]}
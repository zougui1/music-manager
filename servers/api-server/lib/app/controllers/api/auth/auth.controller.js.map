{"version":3,"file":"auth.controller.js","sourceRoot":"","sources":["../../../../../src/app/controllers/api/auth/auth.controller.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,qCAAmG;AACnG,uCAAgC;AAEhC,0CAA+C;AAE/C,MAAa,cAAc;IAMzB,KAAK,CAAC,KAAK,CAAC,GAAY,EAAE,MAA+B,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAuC;QACjH,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QACpD,MAAM,KAAK,GAAG,qBAAa,CAAC,IAAI,CAAC,CAAC;QAElC,OAAO,IAAI,qBAAc,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;IAC7C,CAAC;IAGD,KAAK,CAAC,YAAY,KAA4B,OAAO,IAAI,qBAAc,EAAE,CAAC,CAAC,CAAC;CAC7E;AAZC;IADC,iBAAU;8BACJ,eAAI;4CAAC;AAGZ;IADC,WAAI,CAAC,QAAQ,CAAC;;qCACE,cAAO;;2CAKvB;AAGD;IADC,cAAO,CAAC,QAAQ,CAAC;;;;kDAC0D;AAd9E,wCAeC","sourcesContent":["import { Context, dependency, Post, Options, HttpResponse, HttpResponseOK, Log } from '@foal/core';\nimport { User } from 'user-pkg';\n\nimport { generateToken } from '../../../utils';\n\nexport class AuthController {\n\n  @dependency\n  user!: User;\n\n  @Post('/login')\n  async login(ctx: Context, params: Record<string, unknown>, { email, password }: { email: string, password: string }): Promise<HttpResponse> {\n    const user = await this.user.login(email, password);\n    const token = generateToken(user);\n\n    return new HttpResponseOK({ user, token });\n  }\n\n  @Options('/login')\n  async loginOptions(): Promise<HttpResponse> { return new HttpResponseOK(); }\n}\n"]}